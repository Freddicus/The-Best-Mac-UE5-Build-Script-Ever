# -----------------------------------------------------------------------------
# build_archive_sign_notarize_macos.sh — .env template
#
# Usage:
#   1) Copy this file to: ./.env   (same folder as build_archive_sign_notarize_macos.sh)
#   2) Fill in values as needed.
#      (Many values are optional — the script auto-detects what it can.)
#   3) Run the script normally.
#
# Notes:
# - This file is sourced as shell code. Do not use untrusted .env files.
# - Quote values that contain spaces.
# - CLI flags are highest priority.
# -----------------------------------------------------------------------------

# --- Project paths (usually optional) ---
# If omitted, script may auto-detect when placed in project root.
# REPO_ROOT="/absolute/path/to/your/project/root"
# UPROJECT_PATH="/absolute/path/to/MyGame.uproject"   # optional; if set, it is used before any auto-detect
# UPROJECT_NAME="MyGame.uproject"        # optional; used if UPROJECT_PATH is not set
# XCODE_WORKSPACE="MyGame (Mac).xcworkspace"  # optional; script can locate/choose/generate workspaces interactively
# XCODE_SCHEME="MyGame"                       # optional; script can auto-detect interactively, but CI should set it

# --- Output folders (relative to REPO_ROOT) ---
# BUILD_DIR_REL="Build"
# LOG_DIR_REL="Logs"

# --- Naming ---
# SHORT_NAME="MyGame"
# LONG_NAME="MyGame"

# --- Behavior toggles ---
# USE_XCODE_EXPORT="1"     # 1 = use Xcode archive/export, 0 = skip Xcode
# CLEAN_BUILD_DIR="0"      # 1 = wipe Build dir, 0 = safer
# DRY_RUN="0"              # 1 = print plan then exit
# PRINT_CONFIG="0"         # 1 = print resolved config then exit

# --- Unreal Engine location ---
# UE_ROOT="/Users/Shared/Epic Games/UE_5.x"   # optional; script can auto-detect common EGL installs on macOS
# UAT_SCRIPTS_SUBPATH="Engine/Build/BatchFiles"
# UE_EDITOR_SUBPATH="Engine/Binaries/Mac/UnrealEditor.app/Contents/MacOS/UnrealEditor"

# --- Signing / notarization ---
# DEVELOPMENT_TEAM="ABCDE12345"   # required for Developer ID exports
# SIGN_IDENTITY="Developer ID Application: Your Company (ABCDE12345)"   # required for signing
# EXPORT_PLIST="/absolute/path/to/ExportOptions.plist"   # optional for interactive runs; script can auto-detect or offer to generate
# NOTARY_PROFILE="MyNotaryProfile"   # only needed if notarizing (notarytool keychain profile)

# --- Optional Steam support ---
# ENABLE_STEAM="0"
# STEAM_APP_ID="480"
# WRITE_STEAM_APPID="0"
# STEAM_DYLIB_SRC="/absolute/path/to/libsteam_api.dylib"

# --- Optional DMG output ---
# ENABLE_ZIP="1"   # 1 = create ZIP alongside the app (default: on when NOTARIZE=yes)
# ENABLE_DMG="0"
# FANCY_DMG="0"    # experimental; 1 = Finder-layout + Applications link drag-to-install DMG
#                  # NOTE: Finder layout persistence can be inconsistent on some systems.
#                  # NOTE: Requires GUI session + Finder Automation permission.
# DMG_NAME="MyGame.dmg"
# DMG_VOLUME_NAME="MyGame"
# DMG_OUTPUT_DIR="Build"

# --- Sample DMG config (explicit defaults) ---
# ENABLE_DMG="1"
# FANCY_DMG="0"
# DMG_NAME="MyGame.dmg"
# DMG_VOLUME_NAME="MyGame"
# DMG_OUTPUT_DIR="Build"

# --- Non-interactive (skip prompts) ---
# BUILD_TYPE="shipping"   # shipping | development (or s/d)
# NOTARIZE="yes"          # yes | no

# --- CI minimal config (common) ---
# In non-interactive environments, set at least:
#   DEVELOPMENT_TEAM
#   SIGN_IDENTITY
#   EXPORT_PLIST   (or generate one in-repo ahead of time)
# And if notarizing:
#   NOTARY_PROFILE
